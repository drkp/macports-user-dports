# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           texlive 1.0

name                texlive-context
version             30044
revision            0

categories          tex
maintainers         dports
license             Copyleft Permissive
description         TeX Live: ConTeXt format
long_description    Hans Hagen's powerful ConTeXt system, http://pragma-ade.com. Also includes third-party ConTeXt packages.

checksums           texlive-context-30044-run.tar.xz \
                    rmd160  4309736b73f3634c991d612fed5ef83cd0d2eb69 \
                    sha256  59180084d7fa509381363eb092a9ae46e194ff880da0ee14ceafd371cfc36275 \
                    texlive-context-30044-doc.tar.xz \
                    rmd160  f867a0578329e87096df615cb0c49bcf68cd3223 \
                    sha256  a505330ae1d59e05771abeceda6140850292fb76c0fa5c578b76f45f225b415c \
                    texlive-context-30044-src.tar.xz \
                    rmd160  154b9b332c7a960ae321d6a0764191c6512f02a9 \
                    sha256  bde601dc04f39984a5813caca4e7d4b9f76ea094723e49576eef4dde91c58c91

depends_lib         port:texlive-basic

texlive.formats      \
    {1 cont-en pdftex cont-usr.tex {-8bit *cont-en.mkii}} \
    {1 cont-en xetex cont-usr.tex {-8bit *cont-en.mkii}} \
    {0 cont-de pdftex cont-usr.tex {-8bit *cont-de.mkii}} \
    {0 cont-fr pdftex cont-usr.tex {-8bit *cont-fr.mkii}} \
    {0 cont-it pdftex cont-usr.tex {-8bit *cont-it.mkii}} \
    {0 cont-nl pdftex cont-usr.tex {-8bit *cont-nl.mkii}} \
    {0 cont-ro pdftex cont-usr.tex {-8bit *cont-ro.mkii}}

texlive.maps      \
    {Map original-context-symbol.map}

texlive.binaries    context ctxtools luatools mtxrun pstopdf texexec texmfstart

patchfiles          patch-runfiles_texmf-dist_tex_context_base_data-res.lua.diff

post-patch {
    reinplace "s|@@TEXMFSYSCONFIG@@|${texlive_texmfsysconfig}|" ${worksrcpath}/runfiles/texmf-dist/tex/context/base/data-res.lua
}

depends_lib-append  port:texlive-latex \
                    port:texlive-metapost \
                    port:texlive-xetex \
                    port:texlive-fonts-recommended \
                    port:texlive-math-extra

post-deactivate {
    delete ${texlive_texmfsysvar}/luatex-cache
}

texlive.texmfport
