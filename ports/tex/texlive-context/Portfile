# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0
PortGroup           texlive 1.0

name                texlive-context
version             26873
revision            0

categories          tex
maintainers         dports
license             Copyleft Permissive
description         TeX Live: ConTeXt format
long_description    Hans Hagen's powerful ConTeXt system, http://pragma-ade.com. Also includes third-party ConTeXt packages.

checksums           texlive-context-26873-run.tar.xz \
                    rmd160  0bfcfaa5f236602cd9894c203841183c5d014146 \
                    sha256  1000fc59d181870d44b696b7cd0f822b2d8cc9c1de228c3af64b77fe537adf39 \
                    texlive-context-26873-doc.tar.xz \
                    rmd160  76a9afdd1a5f660f5c964dc4514ea07a6e1b1d47 \
                    sha256  573fa25df199ee1f347196661c65e387442462c96f50732b0d0dd5221af7c470 \
                    texlive-context-26873-src.tar.xz \
                    rmd160  f8e666aa8a843f8855895f8400e1a268b8c5b2aa \
                    sha256  a669f5cb4a6b43d30028cc1da4f504fd2d00519abeaf304ce32c63cc0ceac900

depends_lib         port:texlive-basic

texlive.formats      \
    {1 cont-en pdftex cont-usr.tex {-8bit *cont-en.ini}} \
    {1 cont-en xetex cont-usr.tex {-8bit *cont-en.ini}} \
    {0 cont-de pdftex cont-usr.tex {-8bit *cont-de.ini}} \
    {0 cont-fr pdftex cont-usr.tex {-8bit *cont-fr.ini}} \
    {0 cont-it pdftex cont-usr.tex {-8bit *cont-it.ini}} \
    {0 cont-nl pdftex cont-usr.tex {-8bit *cont-nl.ini}} \
    {0 cont-ro pdftex cont-usr.tex {-8bit *cont-ro.ini}}

texlive.maps      \
    {Map original-context-symbol.map}

texlive.binaries    context ctxtools luatools mtxrun pstopdf texexec texmfstart

patchfiles          patch-runfiles_texmf-dist_tex_context_base_data-res.lua.diff

post-patch {
    reinplace "s|@@TEXMFSYSCONFIG@@|${texlive_texmfsysconfig}|" ${worksrcpath}/runfiles/texmf-dist/tex/context/base/data-res.lua
}

depends_lib-append  port:texlive-latex \
                    port:texlive-metapost \
                    port:texlive-xetex \
                    port:texlive-fonts-recommended \
                    port:texlive-math-extra

post-deactivate {
    delete ${texlive_texmfsysvar}/luatex-cache
}

texlive.texmfport
